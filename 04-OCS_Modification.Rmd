
```{r, include = FALSE}
ottr::set_knitr_image_path()
```

# Modifying and creating open case studies

## Learning Objectives

This chapter will cover how to modify the case studies to your own needs using the following methods:  

- Modular case study use with the help of the [OCSdata package](https://github.com/opencasestudies/OCSdata)
- Modifying a case study with [GitHub](https://github.com/opencasestudies) and [RStudio](https://www.rstudio.com/)
- Creating your own case study with our [template](https://github.com/opencasestudies/ocs-bp-template) and [MakeCaseStudies](https://rsconnect.biostat.jhsph.edu/MakeCaseStudies/)

## Modular use

Some educators may find that only certain sections of a case study are relevant to their specific needs. For example, a statistics teacher may want students to practice the skills covered in the data analysis section, but doesn't have time to go through the whole case study. The case studies are designed to allow for such use. This educator and their students may jump right in to any case study section without working through any previous sections. This is made possible becase the data files are saved at the end of each section. These data files are made available on the case study's GitHub repository and may also be downloaded with the help of the OCSdata package. See Chapter 2 for more details on the structure and organization of a case study data folder. The table below explains which data sub-folder and package function to use for each case study section. 

| Data Folder | Case Study Section | OCSdata Function | 
| ----- | -------- | ------ |
| raw | Data Import | `raw_data` | 
| imported | Data Exploration, Data Wrangling | `imported_data` |
| wrangled | Data Visualization, Data Analysis | `wrangled_csv`, `wrangled_rda` |
| simpler_import | Data Import | `simpler_import_data` | 
| extra | Suggested Homework (?) | `extra_data` |

### Example of Modular Use

The following steps illustrate how one would skip to a specific case study section. The data analysis section from the "Opioids in United States" case study is used for this example, but these directions apply for any section in any case study.

1) Use the table of contents to navigate to the section of interest. Click on the arrow that reads "If you skipped the previous sections click here."
```{r, fig.align='center', echo = FALSE, fig.alt= "Moving image (GIF) showing a user skipping to the data analysis section of a case study"}
knitr::include_graphics('assets/skip_section.gif', dpi = NA)
```

2) Follow the instructions provided to download the data files from the previous section either with OCSdata or manually through GitHub:

2.1) Download with OCSdata:

  2.1.1) First install and load the OCSdata package: 
  ```{r, include = TRUE, eval = FALSE}
  install.packages("OCSdata") #only run once to install package
  library(OCSdata) #run every new R session to load package
  ```
  
  2.1.2) Now download the wrangled data into your R environment using the following function command:
  ```{r, include = TRUE, eval = FALSE}
  wrangled_rda("ocs-bp-opioid-rural-urban", outpath = getwd()) 
  ```
  *This command will download the wrangled data in .RDA format. You may also be downloaded wrangled data in .CSV format by replacing 'wrangled_rda' with 'wrangled_csv'*
  
  2.1.3) Load the RDA files with the following commands:
  ```{r, include = TRUE, eval = FALSE}
  load(file = here::here("OCS_data", "data", "wrangled", "Annual_opioid_data.rda"))
  load(file = here::here("OCS_data", "data", "wrangled", "county_info.rda"))
  ```
  
2.2) Manually Download from GitHub: 

  2.2.1) Download the .RDA files available on the case study GitHub repository from [here](https://github.com/opencasestudies/ocs-bp-opioid-rural-urban/tree/master/data/wrangled)
  
  *The CSV versions of the files may also be downloaded here, if preferred*
  
  2.2.2) Move the data files from your 'Downloads' folder to your R session's current working directory (you can see what this is with ```getwd()```).
  
  2.2.3) Load the RDA files with the following commands: 
  ```{r, include = TRUE, eval = FALSE}
  load(file = here::here("Annual_opioid_data.rda"))
  load(file = here::here("county_info.rda"))
  ```

3) All the data you need to work through the current section is now loaded into your environment. You are ready to work through the section of interest, without needing to work through any of the previous sections.

## Modify a case study

*short explanation of case study structure: RStudio projects written in Rmd, knitted to HTML and hosted on GitHub
*tutorial on .Rmd and knitting in RStudio
*tutorial on GitHub: forking
*step by step example of forking a case study repository, editing Rmd content, knitting, and sharing the output

## Create a case study

*tutorial on how to create a case study using GitHub template
*tutorial on how to create a case study using [MakeCaseStudies](https://rsconnect.biostat.jhsph.edu/MakeCaseStudies/) app

## Session info

```{r, echo = FALSE}
sessionInfo()
```
